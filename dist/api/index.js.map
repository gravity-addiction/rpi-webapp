{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/gary/Development/node_modules/dotenv/lib/main.js","webpack:///./src/api/api-ctrl.ts","webpack:///./src/api/api-socket-io.ts","webpack:///./src/api/api.ts","webpack:///./src/modules/db.ts","webpack:///./src/modules/spotify/api/index.ts","webpack:///./src/modules/spotify/api/spotify-auth.ctrl.ts","webpack:///./src/modules/spotify/api/spotify-auth.routes.ts","webpack:///./src/modules/spotify/api/spotify-wrapper.ts","webpack:///./src/modules/spotify/api/spotify.routes.ts","webpack:///./src/modules/sysinfo/api/index.ts","webpack:///./src/modules/sysinfo/api/sysinfo.routes.ts","webpack:///external \"body-parser\"","webpack:///external \"compression\"","webpack:///external \"cookie-parser\"","webpack:///external \"cors\"","webpack:///external \"easy-rbac\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"http\"","webpack:///external \"https\"","webpack:///external \"knex\"","webpack:///external \"minimist\"","webpack:///external \"path\"","webpack:///external \"request\"","webpack:///external \"shortid\"","webpack:///external \"socket.io\"","webpack:///external \"systeminformation\"","webpack:///external \"url-join\""],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFY;;AAEZ,WAAW,mBAAO,CAAC,cAAI;AACvB,aAAa,mBAAO,CAAC,kBAAM;;AAE3B;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sDAAsD,WAAW;;AAEjE;AACA;AACA;AACA;AACA,KAAK;;AAEL,YAAY;AACZ,GAAG;AACH,YAAY;AACZ;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;AC5EA,uEAA0C;AAC1C,qDAA4B;AAC5B,mDAA8B;AAC9B,+CAAkC;AAClC,qDAAiE;AACjE,wDAA2D;AAE3D,+DAAsC;AAEtC,8FAAkD;AAElD;IAAA;IAsCA,CAAC;IAAD,mBAAC;AAAD,CAAC;AAtCY,oCAAY;AAwCzB,SAAgB,WAAW,CAAC,IAAI;IAC9B,IAAI,MAAM,CAAC;IACX,IAAI;QACF,MAAM,GAAG,mBAAO,CAAC,qDAAQ,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;KACnD;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;QAC/C,OAAO,IAAI,CAAC;KACb;IAED,IAAI,MAAM,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,MAAM,KAAK,IAAI,EAAE;QAC7D,IAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EACpC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;QAC5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;YAC7B,IAAI;gBAAE,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;aAAE;YAAC,OAAO,CAAC,EAAE,GAAG;SAC3E;QACD,OAAO,MAAM,CAAC,MAAM,CAAC;KACtB;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAlBD,kCAkBC;AAED,SAAgB,eAAe,CAAC,GAAwB,EAAE,QAAgC;IACxF,GAAG,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI;QAC1B,IAAI,GAAG,CAAC,IAAI,KAAK,mBAAmB,EAAE;YACpC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;SACnC;aAAM;YACL,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;SAC1C;IACH,CAAC,CAAC,CAAC;AACL,CAAC;AARD,0CAQC;AAED,SAAgB,SAAS,CAAC,GAAwB,EAAE,QAAgC;IAClF,IAAM,IAAI,GAAQ,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAEzC,IAAI,IAAI,CAAC,GAAG,EAAE;QACZ,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QACvC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACvB;SAAM;QACL,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,WAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;QACxD,WAAW,CAAC,WAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;KACxC;IAGD,iCAAiC;IACjC,IAAI,IAAI,CAAC,UAAU,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,KAAK,EAAE;QACtD,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,QAAQ,CAAC,UAAU,CAAC;QACvF,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC;KACpD;IAED,sBAAsB;IACtB,IAAI,SAAS,CAAC,IAAI,CAAC,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,EAAE;QACjF,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC,SAAS,IAAI,QAAQ,CAAC,SAAS,IAAI,IAAI,CAAC;QACxF,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC;YACX,MAAM,EAAE,SAAS;YACjB,WAAW,EAAE,IAAI;SAClB,CAAC,CAAC,CAAC;KACL;IAED,kBAAkB;IAClB,IAAI,SAAS,CAAC,IAAI,CAAC,WAAW,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,QAAQ,CAAC,WAAW,IAAI,KAAK,CAAC,EAAE;QAC3F,IAAM,WAAW,GAAG,mBAAO,CAAC,gCAAa,CAAC,CAAC;QAC3C,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC;KACxB;IAED,4BAA4B;IAC5B,cAAc;IACd,IAAM,cAAc,GAAG,IAAI,CAAC,eAAe,IAAI,OAAO,CAAC,GAAG,CAAC,eAAe,IAAI,QAAQ,CAAC,cAAc,IAAI,KAAK,CAAC;IAC/G,IAAI,cAAc,EAAE;QAAE,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;KAAE;IAEjE,qBAAqB;IACrB,IAAM,oBAAoB,GAAG,IAAI,CAAC,qBAAqB,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB,IAAI,QAAQ,CAAC,oBAAoB,IAAI,KAAK,CAAC;IACtI,IAAI,oBAAoB,EAAE;QAAE,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAC,CAAC;KAAE;IAEnF,cAAc;IACd,IAAM,cAAc,GAAG,IAAI,CAAC,eAAe,IAAI,OAAO,CAAC,GAAG,CAAC,eAAe,IAAI,QAAQ,CAAC,cAAc,IAAI,KAAK,CAAC;IAC/G,IAAI,cAAc,EAAE;QAAE,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;KAAE;IAEnE;;;;;;;;;;;;;;MAcE;IAEA,oBAAoB;IACpB,IAAI,SAAS,CAAC,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO,IAAI,QAAQ,CAAC,OAAO,IAAI,KAAK,CAAC,EAAE;QAC/E,IAAM,YAAY,GAAG,mBAAO,CAAC,oCAAe,CAAC,CAAC;QAC9C,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC;KACzB;IAED,iBAAiB;IACjB,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,IAAI,KAAK,CAAC,EAAE;QACtE,IAAM,SAAS,GAAG,IAAI,CAAC,UAAU,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,QAAQ,CAAC,UAAU,IAAI,SAAS,CAAC;QAChG,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;QAC5B,GAAG,CAAC,GAAG,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;KAChC;IAED,sBAAsB;IACtB,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,IAAI,KAAK,CAAC,EAAE;QACtE,IAAM,cAAc,GAAG,QAAQ,CAAC,cAAc,IAAI,EAAE,CAAC;QACrD,IAAM,IAAI,GAAG,mBAAO,CAAC,4BAAW,CAAC,CAAC;QAClC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;KACpC;IAED,eAAe;IACf,IAAM,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,IAAI,OAAO,CAAC,GAAG,CAAC,iBAAiB,IAAI,QAAQ,CAAC,iBAAiB,IAAI,oBAAoB,CAAC;IACxI,IAAI,SAAS,CAAC,iBAAiB,CAAC,EAAE;QAChC,GAAG,CAAC,GAAG,CAAC,UAAS,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI;YAClC,IAAI,GAAG,CAAC,IAAI,KAAK,mBAAmB,EAAE;gBACpC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;oBAC1B,OAAO,EAAE,KAAK;oBACd,OAAO,EAAE,iBAAiB;iBAC3B,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CAAC;KACJ;IAED,OAAO,QAAQ,CAAC;AAClB,CAAC;AAhGD,8BAgGC;AAED,SAAgB,GAAG,CAAC,GAAwB,EAAE,QAAgC;IAC5E,IAAM,IAAI,GAAQ,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAEzC,IAAM,WAAW,GAAG,SAAS,CAAC,IAAI,CAAC,WAAW,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,QAAQ,CAAC,WAAW,IAAI,IAAI,CAAC,EACpG,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,YAAY,IAAI,OAAO,CAAC,GAAG,CAAC,YAAY,IAAI,QAAQ,CAAC,YAAY,IAAI,KAAK,CAAC,EACzG,aAAa,GAAG,SAAS,CAAC,IAAI,CAAC,aAAa,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa,IAAI,QAAQ,CAAC,aAAa,IAAI,IAAI,CAAC,CACjH;IAED,IAAI,SAAiB,EACjB,MAAc,CAAC;IAEnB,eAAe;IACf,IAAI,YAAY,EAAE;QAEhB,iBAAiB;QACjB,IAAM,OAAK,GAAG,IAAI,CAAC,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,IAAI,SAAS,CAAC;QACtF,IAAM,SAAO,GAAG,aAAa,CAAC,IAAI,CAAC,UAAU,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,QAAQ,CAAC,UAAU,IAAI,IAAI,CAAC,CAAC;QACxG,IAAM,OAAO,GAAG;YACd,GAAG,EAAE,iBAAY,CAAC,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC,SAAS,IAAI,QAAQ,CAAC,SAAS,CAAC;YAChF,IAAI,EAAE,iBAAY,CAAC,IAAI,CAAC,UAAU,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,QAAQ,CAAC,UAAU,CAAC;SACrF,CAAC;QACF,GAAG,CAAC,GAAG,CAAC,SAAS,EAAE,SAAO,CAAC,CAAC;QAC5B,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,OAAK,CAAC,CAAC;QAExB,mBAAmB;QACnB,SAAS,GAAG,oBAAkB,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;QAC7C,SAAS,CAAC,MAAM,CAAC,SAAO,EAAE,OAAK,EAAE;YAC/B,OAAO,CAAC,GAAG,CAAC,8BAA8B,GAAG,OAAK,GAAG,GAAG,GAAG,SAAO,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;QAEH,SAAS,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,GAAG,IAAK,cAAO,CAAC,GAAG,EAAE,SAAO,CAAC,EAArB,CAAqB,CAAC,CAAC;QACtD,SAAS,CAAC,EAAE,CAAC,WAAW,EAAE,cAAM,kBAAW,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,EAAhC,CAAgC,CAAC,CAAC;KACnE;IAED,IAAI,WAAW,EAAE;QACf,6DAA6D;QAC7D,IAAM,IAAE,GAAG,IAAI,CAAC,EAAE,IAAI,OAAO,CAAC,GAAG,CAAC,EAAE,IAAI,OAAO,CAAC,GAAG,CAAC,EAAE,IAAI,QAAQ,CAAC,OAAO,IAAI,SAAS,CAAC;QACxF,IAAM,MAAI,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,QAAQ,CAAC,SAAS,IAAI,IAAI,CAAC,CAAC;QAC5G,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,MAAI,CAAC,CAAC;QACtB,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,IAAE,CAAC,CAAC;QAElB,MAAM,GAAG,mBAAiB,CAAC,GAAG,CAAC,CAAC;QAChC,MAAM,CAAC,MAAM,CAAC,MAAI,EAAE,IAAE,EAAE;YACtB,OAAO,CAAC,GAAG,CAAC,6BAA6B,GAAG,IAAE,GAAG,GAAG,GAAG,MAAI,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,cAAM,mBAAY,EAAE,EAAd,CAAc,CAAC,CAAC;QAC3C,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,cAAM,mBAAY,EAAE,EAAd,CAAc,CAAC,CAAC;QAC9C,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,GAAG,IAAK,cAAO,CAAC,GAAG,EAAE,MAAI,CAAC,EAAlB,CAAkB,CAAC,CAAC;QAChD,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,cAAM,kBAAW,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,EAA7B,CAA6B,CAAC,CAAC;KAE7D;IAED,YAAY;IACZ,IAAI,aAAa,EAAE;QACjB,cAAc,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;KACxC;IAED;;;MAGE;IAEF,yCAAyC;IACzC,OAAO,CAAC,EAAE,CAAC,QAAQ,EAAE;QACnB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC;IAEH,kCAAkC;IAClC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE;QACjB,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;IACrC,CAAC,CAAC,CAAC;IAEH,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;AAClD,CAAC;AA1ED,kBA0EC;AAED;;GAEG;AACH,SAAS,aAAa,CAAC,GAAG;IACxB,IAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;IAE/B,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE;QACf,aAAa;QACb,OAAO,GAAG,CAAC;KACZ;IAED,IAAI,IAAI,IAAI,CAAC,EAAE;QACb,cAAc;QACd,OAAO,IAAI,CAAC;KACb;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAED;;GAEG;AACH,SAAS,SAAS,CAAC,GAAG;IACpB,IAAI,GAAG,IAAI,IAAI,EAAE;QAAE,OAAO,KAAK,CAAC;KAAE;IAClC,IAAI,OAAO,GAAG,KAAK,SAAS,EAAE;QAAE,OAAO,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC;KAAE;IACxD,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,KAAK,EAAE,EAAE;QACzC,OAAO,KAAK,CAAC;KACd;SAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;QAClC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;QACpC,IAAI,GAAG,CAAC,WAAW,EAAE,KAAK,MAAM,IAAI,GAAG,CAAC,WAAW,EAAE,KAAK,KAAK,EAAE;YAAE,OAAO,IAAI,CAAC;SAAE;QACjF,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC7B,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;KACtC;IACD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;QAAE,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;KAAE;IACpD,OAAO,KAAK,CAAC;AACf,CAAC;AAGD;;GAEG;AACH,SAAS,OAAO,CAAC,KAAK,EAAE,IAAI;IAC1B,IAAI,KAAK,CAAC,OAAO,KAAK,QAAQ,EAAE;QAC9B,MAAM,KAAK,CAAC;KACb;IAED,IAAM,IAAI,GAAG,OAAO,IAAI,KAAK,QAAQ;QACnC,CAAC,CAAC,OAAO,GAAG,IAAI;QAChB,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC;IAEnB,uDAAuD;IACvD,QAAQ,KAAK,CAAC,IAAI,EAAE;QAClB,KAAK,QAAQ;YACX,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,+BAA+B,CAAC,CAAC;YACpD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAChB,MAAM;QACR,KAAK,YAAY;YACf,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,oBAAoB,CAAC,CAAC;YACzC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAChB,MAAM;QACR;YACE,MAAM,KAAK,CAAC;KACf;AACH,CAAC;AAED;;GAEG;AACH,SAAS,WAAW,CAAC,IAAI;IACvB,IAAM,IAAI,GAAG,OAAO,IAAI,KAAK,QAAQ;QACnC,CAAC,CAAC,OAAO,GAAG,IAAI;QAChB,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;IACxB,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,CAAC;AACtC,CAAC;AAGD;;GAEG;AACH,SAAS,YAAY,KAAK,CAAC;;;;;;;;;;;;;AChVd;AAAb,iBAkBA;AAhBA,iBAAiB;AACjB,IAAM,QAAQ,GAAG,mBAAO,CAAC,4BAAW,CAAC,CAAC;AAEtC,IAAM,cAAc,GAAG,CAAC;IACtB,KAAI,CAAC,EAAE,GAAG,IAAI,CAAC;IAEf,KAAI,CAAC,IAAI,GAAG,UAAS,SAAS,EAAE,MAAM;QACpC,IAAI,CAAC,EAAE,GAAG,IAAI,QAAQ,EAAE,CAAC;QACzB,IAAI,SAAS,EAAE;YAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;SAAE;QAC7C,IAAI,MAAM,EAAE;YAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;SAAE;IACzC,CAAC;IAED,OAAO,KAAI,CAAC;AACd,CAAC,CAAC,EAAE,CAAC;AAEL,iBAAS,cAAc,CAAC;;;;;;;;;;;;;ACjBX;;AACb,4DAAmC;AACnC,gFAA0D;AAE1D,IAAM,WAAW,GAA0B;IACzC,SAAS,EAAE,IAAI;IACf,UAAU,EAAE,QAAQ;IAEpB,cAAc,EAAE,EAAE;IAClB,oBAAoB,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAC;IAEtC,OAAO,EAAE,IAAI;IACb,KAAK,EAAE,IAAI;IAEX,IAAI,EAAE,IAAI;IACV,cAAc,EAAE;QACd,KAAK,EAAE;YACL,GAAG,EAAE;gBACH,cAAc;aACf;SACF;QACD,KAAK,EAAE;YACL,GAAG,EAAE,CAAC,cAAc,CAAC;YACrB,QAAQ,EAAE,CAAC,OAAO,CAAC;SACpB;KACF;CACF,CAAC;AAEF,8BAA8B;AAC9B,IAAM,GAAG,GAAG,OAAO,EAAE,CAAC;AACtB,iCAAiC;AACjC,4EAA4E;AAC5E,IAAM,cAAc,GAAG,oBAAS,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;AAEnD,iBAAiB;AACjB,4GAAwD;AACxD,GAAG,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAEvB,4GAAwD;AACxD,GAAG,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAGvB,uDAAuD;AACvD,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,OAAO,CAAC,MAAM,CAAC,cAAc,CAAC,UAAU,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAE5E,gEAAgE;AAChE,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,UAAU,GAAoB,EAAE,GAAqB;IAChE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;IACjC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAC,IAAI,EAAE,cAAc,CAAC,UAAU,EAAC,CAAC,CAAC;AACnE,CAAC,CAAC,CAAC;AAGH,qBAAqB;AACf,4CAAgD,EAA9C,wBAAS,EAAE,kBAAmC,CAAC;;;;;;;;;;;;;;;ACrDvD,mDAA6B;AAE7B;IAAA;IAkBA,CAAC;IAPgB,UAAO,GAAtB;QACE,IAAM,QAAQ,GAAG,EAAE,CAAC,UAAU,CAAC;QAC/B,IAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEzB,OAAO,CAAC,CAAC;IACX,CAAC;IAfc,aAAU,GAAG;QAC1B,MAAM,EAAE,SAAS;QACjB,UAAU,EAAE;YACV,QAAQ,EAAE,iBAAiB;SAC5B;QACD,gBAAgB,EAAE,IAAI;KACvB,CAAC;IAEY,OAAI,GAAS,EAAE,CAAC,OAAO,EAAE,CAAC;IAS1C,SAAC;CAAA;AAlBY,gBAAE;;;;;;;;;;;;;ACFF;AAEb,2FAAoD;AACpD,qDAA4B;AAC5B,4DAAmC;AACnC,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;AAErD,sBAAW,CAAC,WAAI,CAAC,SAAS,EAAE,4BAA4B,CAAC,CAAC,CAAC;AAE3D,kIAAgE;AAChE,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;AAE9B,oHAAuD;AACvD,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAE1B,iBAAS,MAAM,CAAC;;;;;;;;;;;;;ACfH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGb,8DAAoC;AACpC,4DAAmC;AACnC,4DAAmC;AAEnC,sEAA8B;AAE9B,IAAM,qBAAqB,GAAG,kEAAkE,EAC1F,aAAa,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,IAAI,qBAAqB,EAClE,mBAAmB,GAAG,OAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI,MAAM,CAAC;AAEtE,uDAAuD;AACvD,IAAI;IACF,OAAO,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;CACnC;AAAC,OAAO,CAAC,EAAE;IACV,OAAO,CAAC,GAAG,CAAC,8BAA8B,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;IACvD,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,aAAa,CAAC,CAAC;IAC3C,OAAO,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC;IACrD,OAAO,CAAC,UAAU,CAAC,qBAAqB,CAAC,CAAC;CAC3C;AAED,IAAM,gBAAgB,GAAG,wCAAwC,CAAC;AAElE,IAAM,WAAW,GAAG,mBAAmB,CAAC;AACxC,IAAM,SAAS,GAAG,IAAI,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;AAErE,SAAsB,OAAO,CAAC,KAAK,EAAE,GAAG;;;;;;yBAGlC,KAAK,EAAL,wBAAK;oBACM,qBAAM,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC;4BAC5B,MAAM,CAAC,gBAAgB,CAAC;4BACxB,KAAK,CAAC,kBAAkB,EAAE,KAAK,CAAC;4BAChC,KAAK,EAAE;4BACP,KAAK,CAAC,aAAG;4BACP,MAAM,GAAG,CAAC;wBACZ,CAAC,CAAC;;oBANhB,UAAU,GAAG,SAMG,CAAC;;;yBAIf,EAAC,UAAU,IAAI,GAAG,GAAlB,wBAAkB;oBACP,qBAAM,OAAE,CAAC,IAAI,CAAC,YAAY,CAAC;4BAC9B,QAAQ,CAAC,cAAc,EAAE,oBAAoB,EAAE,eAAe,CAAC;4BAC/D,MAAM,CAAC,gBAAgB,CAAC;4BACxB,KAAK,CAAC,kBAAkB,EAAE,GAAG,CAAC;4BAC9B,OAAO,CAAC,4BAA4B,EAAE,MAAM,CAAC;4BAC7C,KAAK,EAAE;4BACP,KAAK,CAAC,aAAG;4BACP,MAAM,GAAG,CAAC;wBACZ,CAAC,CAAC;;oBARZ,UAAU,GAAG,SAQD,CAAC;;;yBAIX,EAAC,UAAU,IAAI,CAAC,KAAK,IAAI,CAAC,GAAG,GAA7B,wBAA6B;oBAClB,qBAAM,OAAE,CAAC,IAAI,CAAC,YAAY,CAAC;4BAC9B,QAAQ,CAAC,cAAc,EAAE,oBAAoB,EAAE,eAAe,CAAC;4BAC/D,MAAM,CAAC,gBAAgB,CAAC;4BACxB,OAAO,CAAC,4BAA4B,EAAE,MAAM,CAAC;4BAC7C,KAAK,EAAE;4BACP,KAAK,CAAC,aAAG;4BACP,MAAM,GAAG,CAAC;wBACZ,CAAC,CAAC;;oBAPZ,UAAU,GAAG,SAOD,CAAC;;wBAEf,sBAAO,UAAU,EAAC;;;;CACnB;AAtCD,0BAsCC;AAED,SAAsB,WAAW,CAAC,IAAI;;;;;wBACf,qBAAM,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,KAAK,EAAE;;oBAAtF,YAAY,GAAG,SAAuE;oBAGtF,KAAK,GAAG,eAAe,EAAE,CAAC;oBAC1B,gBAAgB,GAAI,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,CAAC;oBAC3D,kBAAkB,GAAG,iEAAiE;wBACjE,mFAAmF;wBACnF,6EAA6E;wBAC7E,yEAAyE,CAAC;oBAErG,qBAAM,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC;4BACnC,SAAS,EAAE,YAAY,CAAC,iBAAiB;4BACzC,WAAW,EAAE,kBAAkB;4BAC/B,YAAY,EAAE,gBAAgB;4BAC9B,gBAAgB,EAAE,KAAK;yBACxB,CAAC;;oBALF,SAKE,CAAC;oBAEH,kBAAkB;oBAClB,sBAAO,gBAAgB;4BACrB,aAAa,GAAG,kBAAkB,CAAC,YAAY,CAAC,iBAAiB,CAAC;4BAClE,qBAAqB;4BACrB,gBAAgB,GAAG,kBAAkB,CAAC,gBAAgB,CAAC;4BACvD,SAAS,GAAG,kBAAkB,CAAC,kBAAkB,CAAC;4BAClD,SAAS,GAAG,kBAAkB,CAAC,KAAK,CAAC;4BACrC,mBAAmB,EAAC;;;;CACvB;AA1BD,kCA0BC;AAED,SAAgB,gBAAgB,CAAC,KAAK,EAAE,IAAI;IAA5C,iBA+BC;IA9BC,OAAO,IAAI,OAAO,CAAC,UAAO,GAAG,EAAE,GAAG;;;;wBAChB,qBAAM,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,KAAK,EAAE;;oBAA5F,OAAO,GAAG,SAAkF;oBAChF,qBAAM,cAAc,CACpC,KAAK,EACL;4BACE,UAAU,EAAE,oBAAoB;4BAChC,IAAI,EAAE,IAAI;4BACV,YAAY,EAAE,OAAO,CAAC,YAAY;yBACnC,CACF,CAAC,KAAK,CAAC,aAAG,IAAI,UAAG,CAAC,GAAG,CAAC,EAAR,CAAQ,CAAC;;oBAPlB,SAAS,GAAG,SAOM;yBAEpB,SAAS,EAAT,wBAAS;oBAEM,qBAAM,eAAe,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,aAAG,IAAI,UAAG,CAAC,GAAG,CAAC,EAAR,CAAQ,CAAC;;oBAA9D,QAAQ,GAAG,SAAmD;yBAChE,QAAQ,EAAR,wBAAQ;oBACV,kCAAkC;oBAClC,qBAAM,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC;4BACnC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;yBACnB,CAAC,CAAC,KAAK,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,KAAK,CAAC,aAAG;4BAC3C,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,GAAG,CAAC,CAAC;wBAC3C,CAAC,CAAC;;oBALF,kCAAkC;oBAClC,SAIE,CAAC;oBACH,2BAA2B;oBAC3B,GAAG,CAAC,QAAQ,CAAC,CAAC;;;oBAEd,GAAG,CAAC,EAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,kCAAkC,EAAC,CAAC,CAAC;;;;oBAGhE,GAAG,CAAC,EAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,oBAAoB,EAAC,CAAC,CAAC;;;;;SAEnD,CAAC,CAAC;AACL,CAAC;AA/BD,4CA+BC;AACD,SAAgB,eAAe;IAE7B,IAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAC;IAC7B,OAAO,mBAAmB,IAAI,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;QAAE,GAAG,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAC;KAAE;IAChF,OAAO,GAAG,CAAC;AACb,CAAC;AALD,0CAKC;AAED,gEAAgE;AAChE,SAAgB,eAAe,CAAC,KAAK,EAAE,IAAI;IACzC,kCAAkC;IAClC,IAAM,WAAW,GAAQ;QACvB,YAAY,EAAE,IAAI,CAAC,YAAY,IAAI,EAAE;QACrC,UAAU,EAAE,IAAI,CAAC,UAAU,IAAI,EAAE;QACjC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;KACvF,CAAC;IACF,IAAI,IAAI,CAAC,aAAa,EAAE;QAAE,WAAW,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;KAAE;IAE3E,OAAO,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC;QAClD,KAAK,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,KAAK,CAAC,aAAG;QACxC,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,GAAG,CAAC,CAAC;IAC/C,CAAC,CAAC,CAAC;AACL,CAAC;AAbD,0CAaC;AAED,SAAgB,eAAe,CAAC,KAAK;IAArC,iBA+CC;IA9CC,OAAO,IAAI,OAAO,CAAC,UAAO,GAAG,EAAE,GAAG;;;;;wBAChB,qBAAM,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,KAAK,EAAE;;oBAA5F,OAAO,GAAG,SAAkF;oBAClG,qDAAqD;oBACrD,OAAO,CAAC,GAAG,CACT;wBACE,GAAG,EAAE,+BAA+B;wBACpC,OAAO,EAAE,EAAE,eAAe,EAAE,SAAS,GAAG,OAAO,CAAC,YAAY,EAAE;wBAC9D,IAAI,EAAE,IAAI;qBACX,EACD,UAAO,KAAK,EAAE,MAAM,EAAE,MAAM;;;;;yCACtB,KAAK,EAAL,wBAAK;oCACP,GAAG,CAAC,EAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC;;;yCACxB,EAAC,KAAK,IAAI,MAAM,CAAC,UAAU,KAAK,GAAG,GAAnC,wBAAmC;oCACtC,KAAK,GAAG,MAAM,CAAC,GAAG,IAAI,EAAE,CAAC;oCACtB,qBAAM,OAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,KAAK,EAAE;;oCAAzE,EAAE,GAAG,SAAoE;yCAGzE,CAAC,EAAE,EAAH,wBAAG;oCACQ,qBAAM,OAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC;4CAC9C,GAAG,EAAE,KAAK;4CACV,IAAI,EAAE,MAAM,CAAC,YAAY,IAAI,EAAE;4CAC/B,OAAO,EAAE,MAAM,CAAC,IAAI,IAAI,EAAE;4CAC1B,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;yCAChC,CAAC,CAAC,KAAK,CAAC,aAAG;4CACV,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,GAAG,CAAC,CAAC;wCAC3C,CAAC,CAAC;wCACF,gBAAgB;sCADd;;oCAPI,IAAI,GAAG,SAOX;oCACF,gBAAgB;oCAChB,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;;;gCAErB,uBAAuB;gCACvB,qBAAM,OAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC;wCACjC,IAAI,EAAE,MAAM,CAAC,YAAY,IAAI,EAAE;wCAC/B,OAAO,EAAE,MAAM,CAAC,IAAI,IAAI,EAAE;wCAC1B,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;qCAChC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,aAAG;wCAC7B,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,GAAG,CAAC,CAAC;oCAC1C,CAAC,CAAC;;oCAPF,uBAAuB;oCACvB,SAME,CAAC;;;oCAGL,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;;oCAEX,GAAG,CAAC,EAAC,MAAM,EAAE,MAAM,CAAC,UAAU,EAAE,KAAK,EAAE,yBAAyB,EAAC,CAAC,CAAC;;;;;yBAEtE,CACF,CAAC;;;;SACH,CAAC,CAAC;AACL,CAAC;AA/CD,0CA+CC;AAED,SAAsB,gBAAgB,CAAC,KAAK;;;;;wBAE1B,qBAAM,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,KAAK,EAAE;;oBAA5F,OAAO,GAAG,SAAkF;oBAClG,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE;wBAC1B,sBAAO,OAAO,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,kBAAkB,EAAC,CAAC,EAAC;qBACjE;oBAED,sBAAO,cAAc,CACnB,KAAK,EACL;4BACE,UAAU,EAAE,eAAe;4BAC3B,aAAa,EAAE,OAAO,CAAC,aAAa;yBACrC,CACF,EAAC;;;;CACH;AAdD,4CAcC;AAED,SAAgB,cAAc,CAAC,KAAK,EAAE,QAAQ;IAA9C,iBA4BC;IA3BC,OAAO,IAAI,OAAO,CAAC,UAAM,GAAG,EAAE,GAAG;;;;;wBACV,qBAAM,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,KAAK,EAAE;;oBAAtF,YAAY,GAAG,SAAuE;oBAE5F,sBAAsB;oBACtB,OAAO,CAAC,IAAI,CACV,wCAAwC,EACxC;wBACE,IAAI,EAAE;4BACJ,MAAM,EAAE,YAAY,CAAC,iBAAiB;4BACtC,MAAM,EAAE,YAAY,CAAC,qBAAqB;yBAC3C;wBACD,IAAI,EAAE,QAAQ;wBACd,IAAI,EAAE,IAAI;qBACX,EACD,UAAO,GAAG,EAAE,YAAY,EAAE,IAAI;;;;yCACxB,GAAG,EAAH,wBAAG;oCACL,GAAG,CAAC,EAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,qBAAqB,EAAC,CAAC,CAAC;;;yCACxC,EAAC,GAAG,IAAI,YAAY,CAAC,UAAU,KAAK,GAAG,GAAvC,wBAAuC;oCAChD,kBAAkB;oCAClB,qBAAM,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC;;oCADlC,kBAAkB;oCAClB,SAAkC,CAAC;oCACnC,GAAG,CAAC,IAAI,CAAC,CAAC;;;oCAEV,GAAG,CAAC,EAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC;;;;;yBAEnC,CACF,CAAC;;;;SACH,CAAC,CAAC;AACL,CAAC;AA5BD,wCA4BC;AAED,SAAsB,QAAQ,CAAC,SAAiB,EAAE,aAAqB;;;;;wBAChD,qBAAM,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC;wBACxC,KAAK,CAAC,mBAAmB,EAAE,SAAS,CAAC;;oBADrD,YAAY,GAAG,SACsC;oBAC3D,IAAI,YAAY,CAAC,MAAM,EAAE;wBACvB,sBAAO,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC;gCACpC,uBAAuB,EAAE,aAAa;6BACvC,CAAC,CAAC,KAAK,CAAC,mBAAmB,EAAE,SAAS,CAAC,EAAC;qBAC1C;yBAAM;wBACL,sBAAO,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC;gCACpC,mBAAmB,EAAE,SAAS;gCAC9B,uBAAuB,EAAE,aAAa;6BACvC,CAAC,EAAC;qBACJ;;;;;CACF;AAbD,4BAaC;AAED,SAAsB,cAAc;;;;wBAClC,qBAAM,OAAE,CAAC,IAAI,CAAC,GAAG,CAAC,6XAajB,CAAC;;oBAbF,SAaE,CAAC;oBAEH,qBAAM,OAAE,CAAC,IAAI,CAAC,GAAG,CAAC,4MAQjB,CAAC;;oBARF,SAQE,CAAC;oBAEH,sBAAO,OAAE,CAAC,IAAI,CAAC,GAAG,CAAC,2LAMlB,CAAC,EAAC;;;;CACJ;AAjCD,wCAiCC;;;;;;;;;;;;;ACtSY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAb,iBA8DA;AA5DA,8DAAoD;AACpD,uHAAuD;AACvD,8DAAoC;AAEpC,IAAM,MAAM,GAAG,gBAAM,EAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,6BAA6B,EAAE,UAAO,GAAY,EAAE,GAAa;;;;;gBACpE,IAAI,GAAG,GAAG,CAAC,IAAI,IAAI,EAAE,EACrB,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,EAAE,EAChC,aAAa,GAAG,IAAI,CAAC,aAAa,IAAI,EAAE,CAAC;gBAE/C,qBAAM,eAAe,CAAC,cAAc,EAAE;;gBAAtC,SAAsC,CAAC;gBAEvC,eAAe,CAAC,QAAQ,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC,IAAI,CAAC,mBAAS;oBAC/D,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAClC,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;oBACV,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACjB,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBAClD,CAAC,CAAC,CAAC;;;;KAEJ,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,UAAO,GAAY,EAAE,GAAa;;;;;YAChE,8BAA8B;YAC9B,qBAAM,eAAe,CAAC,cAAc,EAAE;;gBADtC,8BAA8B;gBAC9B,SAAsC,CAAC;gBAGjC,qBAAqB,GAAG,eAAe,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;gBAE5G,wBAAwB;gBACxB,GAAG,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC;;;;KACrC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,6BAA6B,EAAE,UAAO,GAAY,EAAE,GAAa;;;QACpE,MAAM,GAAG,GAAG,CAAC,MAAM,IAAI,EAAE,EACzB,KAAK,GAAG,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC;QAEjC,IAAI,CAAC,KAAK,EAAE;YAAE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;SAAE;QAEtC,eAAe,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,mBAAS;YACpD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;YACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;;;KACJ,CAAC,CAAC;AAGH,MAAM,CAAC,GAAG,CAAC,uBAAuB,EAAE,UAAO,GAAY,EAAE,GAAa;;;QAC9D,KAAK,GAAG,GAAG,CAAC,KAAK,IAAI,EAAE,EACvB,IAAI,GAAG,KAAK,CAAC,IAAI,IAAI,EAAE,EACvB,KAAK,GAAG,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;QAEhC,eAAe,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,kBAAQ;YACzD,GAAG,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;YACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;;;KACJ,CAAC,CAAC;AAEH,iBAAS,MAAM,CAAC;;;;;;;;;;;;;AC7DH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEb,8DAAoC;AACpC,4DAAmC;AACnC,uHAAuD;AAEvD,SAAS,eAAe,CAAC,QAAgB,EAAE,GAAW,EAAE,KAAU,EAAE,KAAa,EAAE,IAAgB;IAAhB,kCAAgB;IACjG,OAAO,IAAI,OAAO,CAAC,UAAC,GAAG,EAAE,GAAG;QAC1B,IAAM,IAAI,GAAQ;YAChB,GAAG,EAAE,OAAO,CAAC,0BAA0B,EAAE,GAAG,CAAC;YAC7C,EAAE,EAAE,KAAK;YACT,OAAO,EAAE,EAAE,eAAe,EAAE,SAAS,GAAG,KAAK,EAAE;YAC/C,IAAI,EAAE,IAAI;SACX,CAAC;QAEF,IAAI,QAAQ,CAAC,iBAAiB,EAAE,KAAK,KAAK,IAAI,IAAI,KAAK,IAAI,EAAE;YAC3D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SAClB;QAEL,+BAA+B;QAC3B,OAAO,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,CACnC,IAAI,EACJ,UAAC,KAAK,EAAE,MAAM,EAAE,MAAM;YACpB,IAAI,KAAK,EAAE;gBACT,GAAG,CAAC,EAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC;aAClC;iBAAM;gBACL,GAAG,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAC,CAAC,CAAC;aACnC;QACH,CAAC,CACF,CAAC;IACJ,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;QACV,MAAM,GAAG,CAAC;IACZ,CAAC,CAAC,CAAC;AACL,CAAC;AAGD,mBAA8B,QAAgB,EAAE,GAAW,EAAE,KAAU,EAAE,IAAS;;;;;;oBAC1E,GAAG,GAAG,KAAK,CAAC,GAAG,IAAI,EAAE,EACrB,KAAK,GAAG,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;oBAE1B,UAAU,GAAG,QAAQ,CAAC,iBAAiB,EAAE,CAAC;oBAC/B,qBAAM,eAAe,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,YAAY,EAAE,GAAG,CAAC,EAA9B,CAA8B,CAAC;;oBAAnG,UAAU,GAAG,SAAsF;yBAGnG,WAAU,CAAC,aAAa,GAAG,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,MAAM,CAAC,GAA5D,wBAA4D;oBACjD,qBAAM,eAAe,CAAC,gBAAgB,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,aAAG;4BACxF,OAAO,OAAO,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,wBAAwB,EAAC,CAAC,CAAC;wBACxE,CAAC,CAAC;;oBAFF,UAAU,GAAG,SAEX,CAAC;;;oBAGL,eAAe;oBACf,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;yBACnB,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,KAAK,OAAO,IAAI,CAAC,KAAK,KAAK,CAAC,EAA9B,CAA8B,CAAC;yBAC3C,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,QAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAApB,CAAoB,EAAE,EAAE,CAAE,CAAC;oBAEnD,IAAI,UAAU,EAAE;wBACd,sBAAO,eAAe,CAAC,UAAU,EAC/B,GAAG,EACH,KAAK,EACL,UAAU,CAAC,YAAY,EACvB,IAAI,CACL,EAAC;qBACH;yBAAM;wBACL,sBAAO,OAAO,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,4BAA4B,EAAC,CAAC,EAAC;qBAC3E;;;;;CACF;AA7BD,4BA6BC;;;;;;;;;;;;;ACjEY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAb,iBAkCA;AAhCA,8DAA0D;AAC1D,8DAAoC;AACpC,qHAA+C;AAC/C,yGAA6D;AAC7D,IAAM,MAAM,GAAG,gBAAM,EAAE,CAAC;AAGxB,MAAM,CAAC,IAAI,CAAC,8BAA8B,EAAE,UAAO,GAAY,EAAE,GAAa,EAAE,IAAU;;QACxF,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QACtC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;;;KACvB,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,sBAAsB,EAAE,UAAO,GAAY,EAAE,GAAa,EAAE,IAAU;;;QACzE,MAAM,GAAG,GAAG,CAAC,MAAM,IAAI,EAAE,EACzB,EAAE,GAAG,MAAM,CAAC,EAAE,IAAI,EAAE,EACpB,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,EACxB,KAAK,GAAG,GAAG,CAAC,KAAK,IAAI,EAAE,EACvB,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,iBAAiB,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;QAElF,yBAAc,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,KAAK,EAAE,EAAE,EAAE,MAAM,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,MAAW;YACnF,qBAAqB;YACrB,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,UAAU,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;QAChF,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;YACV,uCAAuC;YACvC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC,CAAC;YAChC,IAAI,OAAO,GAAG,CAAC,KAAK,KAAK,QAAQ,EAAE;gBACjC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;aACrB;iBAAM;gBAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;aAAE;QACjC,CAAC,CAAC,CAAC;;;KACJ,CAAC,CAAC;AAEH,iBAAS,MAAM,CAAC;;;;;;;;;;;;;ACjCH;AAEb,4DAAmC;AACnC,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;AAErD,+GAAkD;AAClD,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAE1B,iBAAS,MAAM,CAAC;;;;;;;;;;;;;ACRH;AAEb,8DAAoD;AAGpD,2EAAwC;AAExC,IAAM,MAAM,GAAG,gBAAM,EAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,qBAAqB,EAAE,UAAC,GAAY,EAAE,GAAa;IAC5D,OAAO,CAAC,GAAG,CAAC;QACV,EAAE,CAAC,MAAM,EAAE;QACX,EAAE,CAAC,GAAG,EAAE;QACR,EAAE,CAAC,QAAQ,EAAE;KACd,CAAC,CAAC,IAAI,CAAC,cAAI;QACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;YACf,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;YACZ,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;SAClB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,iBAAiB,EAAE,UAAC,GAAY,EAAE,GAAa;IACxD,OAAO,CAAC,GAAG,CAAC;QACV,EAAE,CAAC,MAAM,EAAE;QACX,EAAE,CAAC,QAAQ,EAAE;KACd,CAAC,CAAC,IAAI,CAAC,cAAI;QACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;YACf,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC;SACjB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAGH,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,UAAC,GAAY,EAAE,GAAa;IACzD,OAAO,CAAC,GAAG,CAAC;QACV,EAAE,CAAC,WAAW,EAAE;QAChB,EAAE,CAAC,QAAQ,EAAE;QACb,EAAE,CAAC,eAAe,EAAE;QACpB,EAAE,CAAC,cAAc,EAAE;KACpB,CAAC,CAAC,IAAI,CAAC,cAAI;QACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC;YACpB,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;YACjB,eAAe,EAAE,IAAI,CAAC,CAAC,CAAC;YACxB,cAAc,EAAE,IAAI,CAAC,CAAC,CAAC;SACxB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,sBAAsB,EAAE,UAAC,GAAY,EAAE,GAAa;IAC7D,OAAO,CAAC,GAAG,CAAC;QACV,EAAE,CAAC,iBAAiB,EAAE;KACvB,CAAC,CAAC,IAAI,CAAC,cAAI;QACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,iBAAiB,EAAE,IAAI,CAAC,CAAC,CAAC;SAC3B,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,qBAAqB,EAAE,UAAC,GAAY,EAAE,GAAa;IAC5D,OAAO,CAAC,GAAG,CAAC;QACV,EAAE,CAAC,GAAG,EAAE;KACT,CAAC,CAAC,IAAI,CAAC,cAAI;QACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;SACb,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,UAAC,GAAY,EAAE,GAAa;IAC1D,OAAO,CAAC,GAAG,CAAC;QACV,EAAE,CAAC,MAAM,EAAE;QACX,EAAE,CAAC,UAAU,EAAE;QACf,EAAE,CAAC,YAAY,EAAE;KAClB,CAAC,CAAC,IAAI,CAAC,cAAI;QACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;YACf,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC;YACnB,YAAY,EAAE,IAAI,CAAC,CAAC,CAAC;SACtB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,wBAAwB,EAAE,UAAC,GAAY,EAAE,GAAa;IAC/D,OAAO,CAAC,GAAG,CAAC;QACV,EAAE,CAAC,SAAS,EAAE;QACd,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC;KACjB,CAAC,CAAC,IAAI,CAAC,cAAI;QACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC;YAClB,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;SAClB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAIH,MAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,UAAC,GAAY,EAAE,GAAa;IAC1D,OAAO,CAAC,GAAG,CAAC;QACV,EAAE,CAAC,YAAY;KAChB,CAAC,CAAC,IAAI,CAAC,cAAI;QACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;SACd,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAGH,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,UAAC,GAAY,EAAE,GAAa;IACzD,OAAO,CAAC,GAAG,CAAC;QACV,EAAE,CAAC,aAAa,EAAE;QAClB,EAAE,CAAC,cAAc,CAAC,EAAE,EAAE,EAAE,CAAC;KAC1B,CAAC,CAAC,IAAI,CAAC,cAAI;QACV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;YACf,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC;SACjB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,cAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAApB,CAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAEH,iBAAS,MAAM,CAAC;;;;;;;;;;;;AC3HhB,wC;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,+B;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,qC","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/api/api.ts\");\n","'use strict'\n\nconst fs = require('fs')\nconst path = require('path')\n\n/*\n * Parses a string or buffer into an object\n * @param {(string|Buffer)} src - source to be parsed\n * @returns {Object} keys and values from src\n*/\nfunction parse (src) {\n  const obj = {}\n\n  // convert Buffers before splitting into lines and processing\n  src.toString().split('\\n').forEach(function (line) {\n    // matching \"KEY' and 'VAL' in 'KEY=VAL'\n    const keyValueArr = line.match(/^\\s*([\\w\\.\\-]+)\\s*=\\s*(.*)?\\s*$/)\n    // matched?\n    if (keyValueArr != null) {\n      const key = keyValueArr[1]\n\n      // default undefined or missing values to empty string\n      let value = keyValueArr[2] || ''\n\n      // expand newlines in quoted values\n      const len = value ? value.length : 0\n      if (len > 0 && value.charAt(0) === '\"' && value.charAt(len - 1) === '\"') {\n        value = value.replace(/\\\\n/gm, '\\n')\n      }\n\n      // remove any surrounding quotes and extra spaces\n      value = value.replace(/(^['\"]|['\"]$)/g, '').trim()\n\n      obj[key] = value\n    }\n  })\n\n  return obj\n}\n\n/*\n * Main entry point into dotenv. Allows configuration before loading .env\n * @param {Object} options - options for parsing .env file\n * @param {string} [options.path=.env] - path to .env file\n * @param {string} [options.encoding=utf8] - encoding of .env file\n * @returns {Object} parsed object or error\n*/\nfunction config (options) {\n  let dotenvPath = path.resolve(process.cwd(), '.env')\n  let encoding = 'utf8'\n\n  if (options) {\n    if (options.path) {\n      dotenvPath = options.path\n    }\n    if (options.encoding) {\n      encoding = options.encoding\n    }\n  }\n\n  try {\n    // specifying an encoding returns a string instead of a buffer\n    const parsed = parse(fs.readFileSync(dotenvPath, { encoding }))\n\n    Object.keys(parsed).forEach(function (key) {\n      if (!process.env.hasOwnProperty(key)) {\n        process.env[key] = parsed[key]\n      }\n    })\n\n    return { parsed }\n  } catch (e) {\n    return { error: e }\n  }\n}\n\nmodule.exports.config = config\nmodule.exports.load = config\nmodule.exports.parse = parse\n","import express = require('express');\n\nimport * as bodyParser from 'body-parser';\nimport { join } from 'path';\nimport cors = require('cors');\nimport { readFileSync } from 'fs';\nimport { createServer as http_createServer, Server } from 'http';\nimport { createServer as https_createServer } from 'https';\n\nimport minimist = require('minimist');\n\nimport * as SocketIOModule from './api-socket-io';\n\nexport class IAPISettings {\n  http_server: boolean;\n  http_ip: string;\n  http_port: number;\n\n  https_server: boolean;\n  https_ip: string;\n  https_port: number;\n  https_key: string;\n  https_cert: string;\n\n  use_socket_io: boolean;\n\n  app_folder: string;\n\n  show_sql: boolean;\n\n  use_cors: boolean;\n  whitelist: string|string[];\n\n  bodyparserJson: any;\n  bodyparserUrlencoded: any;\n  bodyparserText: any;\n\n  jade: boolean;\n  jade_views: string;\n\n  logger: string;\n\n  compression: boolean;\n\n  rbac: boolean;\n  rbacDefinition: any;\n\n  cookies: boolean;\n  csurf: boolean;\n\n  unauthorizedError: string;\n}\n\nexport function parseDotEnv(path) {\n  let dotenv;\n  try {\n    dotenv = require('dotenv').config({ path: path });\n  } catch (e) {\n    console.log('Parse Dot Env Error:', e.message);\n    return null;\n  }\n\n  if (dotenv.hasOwnProperty('parsed') && dotenv.parsed !== null) {\n    const objKeys = Object.keys(dotenv.parsed),\n          objI = objKeys.length;\n    for (let i = 0; i < objI; i++) {\n      try { process.env[objKeys[i]] = dotenv.parsed[objKeys[i]]; } catch (e) { }\n    }\n    return dotenv.parsed;\n  }\n  return null;\n}\n\nexport function APIErrorHandler(app: express.Application, settings?: Partial<IAPISettings>) {\n  app.use((err, req, res, next) => {\n    if (err.name === 'UnauthorizedError') {\n      res.status(401).send(err.message);\n    } else {\n      res.status(500).send('Something broke!');\n    }\n  });\n}\n\nexport function APIConfig(app: express.Application, settings?: Partial<IAPISettings>): Partial<IAPISettings> {\n  const args: any = minimist(process.argv);\n\n  if (args.env) {\n    console.log('Default .env:', args.env);\n    parseDotEnv(args.env);\n  } else {\n    console.log('Default .env:', join(__dirname, './.env'));\n    parseDotEnv(join(__dirname, './.env'));\n  }\n\n\n  // App_Folder - Static HTML Files\n  if (args.app_folder || process.env.APP_FOLDER || false) {\n    settings.app_folder = args.app_folder || process.env.APP_FOLDER || settings.app_folder;\n    console.log('Use App Folder', settings.app_folder);\n  }\n\n  // CORS - Whitelisting\n  if (parseBool(args.use_cors || process.env.USE_CORS || settings.use_cors || true)) {\n    const whitelist = args.whitelist || process.env.WHITELIST || settings.whitelist || true;\n    app.use(cors({\n      origin: whitelist,\n      credentials: true\n    }));\n  }\n\n  // Add compression\n  if (parseBool(args.compression || process.env.COMPRESSION || settings.compression || false)) {\n    const compression = require('compression');\n    app.use(compression());\n  }\n\n  // mount body parsers parser\n  // JSON Parser\n  const bodyparserJson = args.bodyparser_json || process.env.bodyparser_json || settings.bodyparserJson || false;\n  if (bodyparserJson) { app.use(bodyParser.json(bodyparserJson)); }\n\n  // URL Encoded Parser\n  const bodyparserUrlencoded = args.bodyparser_urlencoded || process.env.BODYPARSER_URLENCODE || settings.bodyparserUrlencoded || false;\n  if (bodyparserUrlencoded) { app.use(bodyParser.urlencoded(bodyparserUrlencoded)); }\n\n  // Text parser\n  const bodyparserText = args.bodyparser_text || process.env.bodyparser_text || settings.bodyparserText || false;\n  if (bodyparserText) { app.use(bodyParser.text(bodyparserText)); }\n\n/*\n  const multer = require('multer');\n  app.use(multer({\n    dest: '/Users/strictdev1/Documents/dsm-mono/uploads/',\n    rename: function (fieldname, filename) {\n      return filename + Date.now();\n    },\n    onFileUploadStart: function (file) {\n      console.log(file.originalname + ' is starting ...');\n    },\n    onFileUploadComplete: function (file) {\n      console.log(file.fieldname + ' uploaded to  ' + file.path);\n    }\n  }).single());\n*/\n\n  // Add Cookie Parser\n  if (parseBool(args.cookies || process.env.COOKIES || settings.cookies || false)) {\n    const cookieParser = require('cookie-parser');\n    app.use(cookieParser());\n  }\n\n  // configure jade\n  if (parseBool(args.jade || process.env.JADE || settings.jade || false)) {\n    const jadeViews = args.jade_views || process.env.JADE_VIEWS || settings.jade_views || './views';\n    app.set('views', jadeViews);\n    app.set('view engine', 'jade');\n  }\n\n  // configure easy-rbac\n  if (parseBool(args.rbac || process.env.RBAC || settings.rbac || false)) {\n    const rbacDefinition = settings.rbacDefinition || {};\n    const rbac = require('easy-rbac');\n    app.use(rbac.main(rbacDefinition));\n  }\n\n  // Unauthorized\n  const unauthorizedError = args.unauthorizedError || process.env.unauthorizedError || settings.unauthorizedError || 'No token provided.';\n  if (parseBool(unauthorizedError)) {\n    app.use(function(err, req, res, next) {\n      if (err.name === 'UnauthorizedError') {\n        return res.status(403).send({\n          success: false,\n          message: unauthorizedError\n        });\n      }\n    });\n  }\n\n  return settings;\n}\n\nexport function API(app: express.Application, settings?: Partial<IAPISettings>) {\n  const args: any = minimist(process.argv);\n\n  const http_server = parseBool(args.http_server || process.env.HTTP_SERVER || settings.http_server || true),\n        https_server = parseBool(args.https_server || process.env.HTTPS_SERVER || settings.https_server || false),\n        use_socket_io = parseBool(args.use_socket_io || process.env.USE_SOCKET_IO || settings.use_socket_io || true)\n  ;\n\n  let sslserver: Server,\n      server: Server;\n\n  // HTTPS Server\n  if (https_server) {\n\n    // HTTPS Settings\n    const sslIp = args.https_ip || process.env.HTTPS_IP || settings.https_ip || '0.0.0.0';\n    const sslPort = normalizePort(args.https_port || process.env.HTTPS_PORT || settings.https_port || 3443);\n    const sslCert = {\n      key: readFileSync(args.https_key || process.env.HTTPS_KEY || settings.https_key),\n      cert: readFileSync(args.https_cert || process.env.HTTPS_CERT || settings.https_cert)\n    };\n    app.set('sslport', sslPort);\n    app.set('sslip', sslIp);\n\n    // Start SSL Server\n    sslserver = https_createServer(sslCert, app);\n    sslserver.listen(sslPort, sslIp, () => {\n      console.log('Created Listener on https://' + sslIp + ':' + sslPort);\n    });\n\n    sslserver.on('error', (err) => onError(err, sslPort));\n    sslserver.on('listening', () => onListening(sslserver.address()));\n  }\n\n  if (http_server) {\n    // Start HTTP if SSL isn't active or on non-conflicting ports\n    const ip = args.ip || process.env.IP || process.env.IP || settings.http_ip || '0.0.0.0';\n    const port = normalizePort(args.port || process.env.PORT || process.env.PORT || settings.http_port || 3080);\n    app.set('port', port);\n    app.set('ip', ip);\n\n    server = http_createServer(app);\n    server.listen(port, ip, () => {\n      console.log('Created Listener on http://' + ip + ':' + port);\n    });\n\n    server.on('connect', () => onConnection());\n    server.on('connection', () => onConnection());\n    server.on('error', (err) => onError(err, port));\n    server.on('listening', () => onListening(server.address()));\n\n  }\n\n  // Socket-IO\n  if (use_socket_io) {\n    SocketIOModule.init(sslserver, server);\n  }\n\n  /* process.on('uncaughtException', function (exception) {\n    console.log(exception);\n  });\n  */\n\n  // Redirect CTRL-C Stops to Exit Normally\n  process.on('SIGINT', () => {\n    process.exit(0);\n  });\n\n  // Clean up from running processes\n  process.on('exit', () => {\n    console.log('\\nShutting Down..\\n');\n  });\n\n  return { sslserver: sslserver, server: server };\n}\n\n/**\n * Normalize a port into a number, string, or false.\n */\nfunction normalizePort(val) {\n  const port = parseInt(val, 10);\n\n  if (isNaN(port)) {\n    // named pipe\n    return val;\n  }\n\n  if (port >= 0) {\n    // port number\n    return port;\n  }\n\n  return false;\n}\n\n/**\n * Parse boolean values into proper true/false\n */\nfunction parseBool(str) {\n  if (str == null) { return false; }\n  if (typeof str === 'boolean') { return (str === true); }\n  if (typeof str === 'string' && str === '') {\n    return false;\n  } else if (typeof str === 'string') {\n    str = str.replace(/^\\s+|\\s+$/g, '');\n    if (str.toLowerCase() === 'true' || str.toLowerCase() === 'yes') { return true; }\n    str = str.replace(/,/g, '.');\n    str = str.replace(/^\\s*\\-\\s*/g, '-');\n  }\n  if (!isNaN(str)) { return (parseFloat(str) !== 0); }\n  return false;\n}\n\n\n/**\n * Event listener for HTTP server 'error' event.\n */\nfunction onError(error, port) {\n  if (error.syscall !== 'listen') {\n    throw error;\n  }\n\n  const bind = typeof port === 'string'\n    ? 'Pipe ' + port\n    : 'Port ' + port;\n\n  // handle specific listen errors with friendly messages\n  switch (error.code) {\n    case 'EACCES':\n      console.log(bind + ' requires elevated privileges');\n      process.exit(1);\n      break;\n    case 'EADDRINUSE':\n      console.log(bind + ' is already in use');\n      process.exit(1);\n      break;\n    default:\n      throw error;\n  }\n}\n\n/**\n * Event listener for HTTP server 'listening' event.\n */\nfunction onListening(addr) {\n  const bind = typeof addr === 'string'\n    ? 'pipe ' + addr\n    : 'port ' + addr.port;\n  console.log('Listening on ' + bind);\n}\n\n\n/**\n * Event listen for HTTP Connections\n */\nfunction onConnection() { }\n","'use strict';\n\n// IO Integration\nconst socketIO = require('socket.io');\n\nconst SocketIOModule = (() => {\n  this.io = null;\n\n  this.init = function(sslserver, server) {\n    this.io = new socketIO();\n    if (sslserver) { this.io.attach(sslserver); }\n    if (server) { this.io.attach(server); }\n  }\n\n  return this;\n})();\n\nexport = SocketIOModule;\n","'use strict';\nimport * as express from 'express';\nimport { API, APIConfig, IAPISettings } from './api-ctrl';\n\nconst apiSettings: Partial<IAPISettings> = {\n  http_port: 6193,\n  app_folder: '../web',\n\n  bodyparserJson: {},\n  bodyparserUrlencoded: {extended: true},\n\n  cookies: true,\n  csurf: true,\n\n  rbac: true,\n  rbacDefinition: {\n    guest: {\n      can: [\n        'sysinfo:view'\n      ]\n    },\n    admin: {\n      can: ['sysinfo:edit'],\n      inherits: ['guest']\n    }\n  }\n};\n\n// Initialize ExpressJS as app\nconst app = express();\n// Preconfiguation of express app\n// apiDotSettings is the updated config version that includes info from .env\nconst apiDotSettings = APIConfig(app, apiSettings);\n\n// import modules\nimport * as SysinfoRoutes from '../modules/sysinfo/api';\napp.use(SysinfoRoutes);\n\nimport * as SpotifyModule from '../modules/spotify/api';\napp.use(SpotifyModule);\n\n\n// serve static files from app_folder (default: ../web)\napp.get('*.*', express.static(apiDotSettings.app_folder, { maxAge: '1y' }));\n\n// server any application path from app_folder (default: ../web)\napp.all('*', function (req: express.Request, res: express.Response) {\n  console.log(req.url, req.method);\n  res.status(200).sendFile(`/`, {root: apiDotSettings.app_folder});\n});\n\n\n// Setup API Listener\nconst { sslserver, server } = API(app, apiDotSettings);\n","import * as Knex from 'knex';\n\nexport class DB {\n  private static knexConfig = {\n    client: 'sqlite3',\n    connection: {\n      filename: './rpi-webapp.db'\n    },\n    useNullAsDefault: true\n  };\n\n  public static knex: Knex = DB.startup();\n\n  private static startup(): Knex {\n    const dbConfig = DB.knexConfig;\n    const k = Knex(dbConfig);\n\n    return k;\n  }\n\n}\n\n\n","'use strict';\n\nimport { parseDotEnv } from '../../../api/api-ctrl';\nimport { join } from 'path';\nimport * as express from 'express';\nconst router = express.Router({ mergeParams: true });\n\nparseDotEnv(join(__dirname, './modules/spotify/api/.env'));\n\nimport * as SpotifyAuthRoutes from '../api/spotify-auth.routes';\nrouter.use(SpotifyAuthRoutes);\n\nimport * as SpotifyRoutes from '../api/spotify.routes';\nrouter.use(SpotifyRoutes);\n\nexport = router;\n","'use strict';\n\nimport { Router, Request, Response } from 'express';\nimport * as urljoin from 'url-join';\nimport * as request from 'request';\nimport * as shortid from 'shortid';\n\nimport { DB } from '../../db';\n\nconst default_shortid_chars = 'CDEPQMtuvw56cd~1eFG2WXYZab.iABsklxyRnNOfgh4oH3IJjm78_pqrzL90STUV',\n      shortid_chars = process.env.SHORTID_CHARS || default_shortid_chars,\n      shortid_removewords = process.env.SHORTID_REMOVEWORDS || 'fuck';\n\n// Error checking shortid charactor set length is valid\ntry {\n  shortid.characters(shortid_chars);\n} catch (e) {\n  console.log('Invalid Short ID Charactors:', e.message);\n  console.log('Invalid Set:', shortid_chars);\n  console.log('Reverting Short ID to Default Charset');\n  shortid.characters(default_shortid_chars);\n}\n\nconst spotify_auth_url = 'https://accounts.spotify.com/authorize';\n\nconst searchWords = shortid_removewords;\nconst searchExp = new RegExp(searchWords.split(',').join('|'), 'gi');\n\nexport async function getAuth(state, uri) {\n  let authRecord;\n  // Get Auth By db state id\n  if (state) {\n    authRecord = await DB.knex('spotify_auth').\n                  select('spotify_auth.*').\n                  where('token_state_auth', state).\n                  first().\n                  catch(err => {\n                    throw err;\n                  });\n  }\n\n  // Get Auth by URI\n  if (!authRecord && uri) {\n    authRecord = await DB.knex('spotify_me').\n              leftJoin('spotify_auth', 'spotify_auth.me_id', 'spotify_me.id').\n              select('spotify_auth.*').\n              where('spotify_auth.uri', uri).\n              orderBy('spotify_auth.token_expires', 'DESC').\n              first().\n              catch(err => {\n                throw err;\n              });\n  }\n\n  // Get Default Auth Account\n  if (!authRecord && !state && !uri) {\n    authRecord = await DB.knex('spotify_me').\n              leftJoin('spotify_auth', 'spotify_auth.me_id', 'spotify_me.id').\n              select('spotify_auth.*').\n              orderBy('spotify_auth.token_expires', 'DESC').\n              first().\n              catch(err => {\n                throw err;\n              });\n  }\n  return authRecord;\n}\n\nexport async function initAuthUrl(host) {\n  const spotify_keys = await DB.knex('spotify_keys').select('*').orderBy('id', 'DESC').first();\n\n  // Track Authentication Request State in SQL\n  const state = createStateAuth();\n  const spotify_redirect =  urljoin(host, '/api/spotify/callback');\n  const spotify_auth_scope = 'user-library-read user-library-modify user-read-playback-state ' +\n                             'user-read-currently-playing user-read-recently-played user-modify-playback-state ' +\n                             'playlist-read-collaborative playlist-modify-private playlist-modify-public ' +\n                             'playlist-read-private user-top-read user-follow-read user-follow-modify';\n\n  await DB.knex('spotify_auth').insert({\n    client_id: spotify_keys.spotify_client_id,\n    token_scope: spotify_auth_scope,\n    redirect_uri: spotify_redirect,\n    token_state_auth: state\n  });\n\n  // Redirect to URL\n  return spotify_auth_url +\n    '?client_id=' + encodeURIComponent(spotify_keys.spotify_client_id) +\n    '&response_type=code' +\n    '&redirect_uri=' + encodeURIComponent(spotify_redirect) +\n    '&scope=' + encodeURIComponent(spotify_auth_scope) +\n    '&state=' + encodeURIComponent(state) +\n    '&show_dialog=true';\n}\n\nexport function initAuthCallback(state, code) {\n  return new Promise(async (res, rej) => {\n    const dbToken = await DB.knex('spotify_auth').select('*').where('token_state_auth', state).first();\n    const tokenResp = await fetchAuthToken(\n      state,\n      {\n        grant_type: 'authorization_code',\n        code: code,\n        redirect_uri: dbToken.redirect_uri\n      }\n    ).catch(err => rej(err));\n\n    if (tokenResp) {\n      // Create user info\n      const userInfo = await refreshUserInfo(state).catch(err => rej(err));\n      if (userInfo) {\n        // Update auth record with user id\n        await DB.knex('spotify_auth').update({\n          me_id: userInfo[1]\n        }).where('token_state_auth', state).catch(err => {\n          console.log('Error, Me ID Update!', err);\n        });\n        // Redirect to spotify page\n        res(userInfo);\n      } else {\n        rej({status: 400, error: 'Unable to fetch user information'});\n      }\n    } else {\n      rej({status: 404, error: 'No Auth Initalized'});\n    }\n  });\n}\nexport function createStateAuth() {\n\n  let ret = shortid.generate();\n  while (shortid_removewords && searchExp.test(ret)) { ret = shortid.generate(); }\n  return ret;\n}\n\n// Update Auth Token from https://accounts.spotify.com/api/token\nexport function updateAuthToken(state, body) {\n  // Add Access Token to Auth Record\n  const newAuthInfo: any = {\n    access_token: body.access_token || '',\n    token_type: body.token_type || '',\n    token_expires: Math.round((new Date().getTime()) + ((body.expires_in || 3600) * 1000))\n  };\n  if (body.refresh_token) { newAuthInfo.refresh_token = body.refresh_token; }\n\n  return DB.knex('spotify_auth').update(newAuthInfo).\n  where('token_state_auth', state).catch(err => {\n    console.log('Update Auth Token Error!', err);\n  });\n}\n\nexport function refreshUserInfo(state) {\n  return new Promise(async (res, rej) => {\n    const dbToken = await DB.knex('spotify_auth').select('*').where('token_state_auth', state).first();\n    // use the access token to access the Spotify Web API\n    request.get(\n      {\n        url: 'https://api.spotify.com/v1/me',\n        headers: { 'Authorization': 'Bearer ' + dbToken.access_token },\n        json: true\n      },\n      async (errMe, respMe, bodyMe) => {\n        if (errMe) {\n          rej({status: 400, error: errMe});\n        } else if (!errMe && respMe.statusCode === 200) {\n          const meURI = bodyMe.uri || '';\n          let me = await DB.knex('spotify_me').select('id').where('uri', meURI).first();\n\n          // Doesn't Exist insert\n          if (!me) {\n            const meId = await DB.knex('spotify_me').insert({\n              uri: meURI,\n              name: bodyMe.display_name || '',\n              me_type: bodyMe.type || '',\n              me_json: JSON.stringify(bodyMe)\n            }).catch(err => {\n              console.log('Error, Inserting Me!', err);\n            })\n            // assign new id\n            me = { id: meId[0] };\n          } else {\n            // Update with new info\n            await DB.knex('spotify_me').update({\n              name: bodyMe.display_name || '',\n              me_type: bodyMe.type || '',\n              me_json: JSON.stringify(bodyMe)\n            }).where('id', me.id).catch(err => {\n              console.log('Error, Updating Me!', err);\n            });\n          }\n\n          res(me.id);\n        } else {\n          rej({status: respMe.statusCode, error: 'Unknown Response Status'});\n        }\n      }\n    );\n  });\n}\n\nexport async function refreshAuthToken(state) {\n\n  const dbToken = await DB.knex('spotify_auth').select('*').where('token_state_auth', state).first();\n  if (!dbToken.refresh_token) {\n    return Promise.reject({status: 404, error: 'No Refresh Token'});\n  }\n\n  return fetchAuthToken(\n    state,\n    {\n      grant_type: 'refresh_token',\n      refresh_token: dbToken.refresh_token\n    }\n  );\n}\n\nexport function fetchAuthToken(state, formData) {\n  return new Promise(async(res, rej) => {\n    const spotify_keys = await DB.knex('spotify_keys').select('*').orderBy('id', 'DESC').first();\n\n    // Get Record by State\n    request.post(\n      'https://accounts.spotify.com/api/token',\n      {\n        auth: {\n          'user': spotify_keys.spotify_client_id,\n          'pass': spotify_keys.spotify_client_secret\n        },\n        form: formData,\n        json: true\n      },\n      async (err, httpResponse, body) => {\n        if (err) {\n          rej({status: 500, error: 'Token Request Error'});\n        } else if (!err && httpResponse.statusCode === 200) {\n          // update database\n          await updateAuthToken(state, body);\n          res(body);\n        } else {\n          rej({status: 400, error: body});\n        }\n      }\n    );\n  });\n}\n\nexport async function saveKeys(client_id: string, client_secret: string) {\n  const spotify_keys = await DB.knex('spotify_keys').select('*').\n                        where('spotify_client_id', client_id);\n  if (spotify_keys.length) {\n    return DB.knex('spotify_keys').update({\n      'spotify_client_secret': client_secret\n    }).where('spotify_client_id', client_id);\n  } else {\n    return DB.knex('spotify_keys').insert({\n      'spotify_client_id': client_id,\n      'spotify_client_secret': client_secret\n    });\n  }\n}\n\nexport async function createDBTables() {\n  await DB.knex.raw(`\n    CREATE TABLE IF NOT EXISTS \"spotify_auth\" (\n      \"id\" INTEGER PRIMARY KEY AUTOINCREMENT,\n      \"me_id\" INTEGER,\n      \"client_id\" TEXT,\n      \"token_type\" TEXT,\n      \"access_token\" TEXT,\n      \"refresh_token\" TEXT,\n      \"token_expires\" INTEGER,\n      \"token_scope\" TEXT,\n      \"redirect_uri\" TEXT,\n      \"token_state_auth\" TEXT\n    )\n  `);\n\n  await DB.knex.raw(`\n    CREATE TABLE IF NOT EXISTS \"spotify_me\" (\n      \"id\" INTEGER PRIMARY KEY AUTOINCREMENT,\n      \"uri\" TEXT,\n      \"name\" TEXT,\n      \"me_type\" TEXT,\n      \"me_json\" TEXT\n    );\n  `);\n\n  return DB.knex.raw(`\n    CREATE TABLE IF NOT EXISTS \"spotify_keys\" (\n      \"id\" INTEGER PRIMARY KEY AUTOINCREMENT,\n      \"spotify_client_id\" TEXT,\n      \"spotify_client_secret\" TEXT\n    );\n  `);\n}\n\n","'use strict';\n\nimport { Router, Request, Response } from 'express';\nimport * as SpotifyAuthCtrl from './spotify-auth.ctrl';\nimport * as urljoin from 'url-join';\n\nconst router = Router();\n\nrouter.put('/api/spotify/developer_keys', async (req: Request, res: Response) => {\n  const body = req.body || {},\n        client_id = body.client_id || '',\n        client_secret = body.client_secret || '';\n\n  await SpotifyAuthCtrl.createDBTables();\n\n  SpotifyAuthCtrl.saveKeys(client_id, client_secret).then(tokenResp => {\n    res.status(201).json(tokenResp);\n  }).catch(err => {\n    console.log(err);\n    res.status((err.status || 400)).json(err.error);\n  });\n\n});\n\nrouter.get('/api/spotify/auth', async (req: Request, res: Response) => {\n  // Check DB Tables are created\n  await SpotifyAuthCtrl.createDBTables();\n\n  // Initialize Auth record, create URL\n  const spotify_authorize_url = SpotifyAuthCtrl.initAuthUrl(urljoin(req.protocol + '://' + req.headers.host));\n\n  // Start browser journey\n  res.redirect(spotify_authorize_url);\n});\n\nrouter.put('/api/spotify/refresh/:state', async (req: Request, res: Response) => {\n  const params = req.params || {},\n        state = params.state || '';\n\n  if (!state) { res.status(400).end(); }\n\n  SpotifyAuthCtrl.refreshAuthToken(state).then(tokenResp => {\n    res.status(201).json(tokenResp);\n  }).catch(err => {\n    res.status(err.status).json(err.error);\n  });\n});\n\n\nrouter.get('/api/spotify/callback', async (req: Request, res: Response) => {\n  const query = req.query || {},\n        code = query.code || '',\n        state = query.state || '';\n\n  SpotifyAuthCtrl.initAuthCallback(state, code).then(userInfo => {\n    res.redirect('/#/spotify');\n  }).catch(err => {\n    res.status(err.status).send(err.error);\n  });\n});\n\nexport = router;\n","'use strict';\n\nimport * as urljoin from 'url-join';\nimport * as request from 'request';\nimport * as SpotifyAuthCtrl from './spotify-auth.ctrl';\n\nfunction makeSpotifyCall(callType: string, url: string, query: any, token: string, body: any = null) {\n  return new Promise((res, rej) => {\n    const opts: any = {\n      url: urljoin('https://api.spotify.com/', url),\n      qs: query,\n      headers: { 'Authorization': 'Bearer ' + token },\n      json: true\n    };\n\n    if (callType.toLocaleLowerCase() !== 'get' && body !== null) {\n      opts.body = body;\n    }\n\n// console.log(callType, opts);\n    request[callType.toLocaleLowerCase()](\n      opts,\n      (errMe, respMe, bodyMe) => {\n        if (errMe) {\n          rej({status: 400, error: errMe});\n        } else {\n          res({http: respMe, body: bodyMe});\n        }\n      }\n    );\n  }).catch(err => {\n    throw err;\n  });\n}\n\n\nexport default async function(callType: string, url: string, query: any, body: any) {\n  const uri = query.uri || '',\n        state = query.state || '';\n\n  const callTypeLC = callType.toLocaleLowerCase();\n  let authRecord = await SpotifyAuthCtrl.getAuth(state, uri).catch(err => console.log('Auth Error', err));\n\n  // Refresh an Auth token expiring within the next two minutes\n  if (authRecord.token_expires < ((new Date().getTime()) + 120000)) {\n    authRecord = await SpotifyAuthCtrl.refreshAuthToken(authRecord.token_state_auth).catch(err => {\n      return Promise.reject({status: 400, error: 'Token Renewal Required'});\n    });\n  }\n\n  // Filter Query\n  query = Object.keys(query)\n        .filter(k => (k !== 'state' && k !== 'uri'))\n        .reduce((q, k) => (q[k] = query[k], q), {} );\n\n  if (authRecord) {\n    return makeSpotifyCall(callTypeLC,\n      url,\n      query,\n      authRecord.access_token,\n      body\n    );\n  } else {\n    return Promise.reject({status: 400, error: 'No Authorization Available'});\n  }\n}\n","'use strict';\n\nimport { Router, Request, Response, Next } from 'express';\nimport * as urljoin from 'url-join';\nimport SpotifyWrapper from './spotify-wrapper';\nimport * as SocketIOModule from '../../../api/api-socket-io';\nconst router = Router();\n\n\nrouter.post('/api/spotify/raspotify/event', async (req: Request, res: Response, next: Next) => {\n  SocketIOModule.io.emit('spotify', {});\n  res.status(204).end();\n});\n\nrouter.all('/api/spotify/v1/:me*', async (req: Request, res: Response, next: Next) => {\n  const params = req.params || {},\n        me = params.me || '',\n        meStar = params[0] || '',\n        query = req.query || {},\n        body = ((req.method || '').toLocaleLowerCase() === 'get') ? null : req.body;\n\n  SpotifyWrapper(req.method, urljoin('v1/', me, meStar), query, body).then((result: any) => {\n    // Reply Status, Body\n    res.status(((result.http || {}).statusCode || 200)).json((result.body || {}));\n  }).catch(err => {\n    // Catch Errors with status 400 default\n    res.status((err.status || 400));\n    if (typeof err.error === 'object') {\n      res.json(err.error);\n    } else { res.send(err.error); }\n  });\n});\n\nexport = router;\n","'use strict';\n\nimport * as express from 'express';\nconst router = express.Router({ mergeParams: true });\n\nimport * as SysinfoRoutes from './sysinfo.routes';\nrouter.use(SysinfoRoutes);\n\nexport = router;\n","'use strict';\n\nimport { Router, Request, Response } from 'express';\n\nimport * as eRBAC from 'easy-rbac';\nimport * as si from 'systeminformation';\n\nconst router = Router();\n\nrouter.get('/api/sysinfo/static', (req: Request, res: Response) => {\n  Promise.all([\n    si.system(),\n    si.cpu(),\n    si.cpuFlags()\n  ]).then(data => {\n    res.status(200).json({\n      system: data[0],\n      cpu: data[1],\n      cpuFlags: data[2]\n    });\n  }).catch(error => console.error(error));\n});\n\nrouter.get('/api/sysinfo/os', (req: Request, res: Response) => {\n  Promise.all([\n    si.osInfo(),\n    si.versions(),\n  ]).then(data => {\n    res.status(200).json({\n      osInfo: data[0],\n      version: data[1]\n    });\n  }).catch(error => console.error(error));\n});\n\n\nrouter.get('/api/sysinfo/cpu', (req: Request, res: Response) => {\n  Promise.all([\n    si.currentLoad(),\n    si.fullLoad(),\n    si.cpuCurrentspeed(),\n    si.cpuTemperature()\n  ]).then(data => {\n    res.status(200).json({\n      currentLoad: data[0],\n      fullLoad: data[1],\n      cpuCurrentspeed: data[2],\n      cpuTemperature: data[3]\n    });\n  }).catch(error => console.error(error));\n});\n\nrouter.get('/api/sysinfo/network', (req: Request, res: Response) => {\n  Promise.all([\n    si.networkInterfaces()\n  ]).then(data => {\n    res.status(200).json({\n      networkInterfaces: data[0]\n    });\n  }).catch(error => console.error(error));\n});\n\nrouter.get('/api/sysinfo/memory', (req: Request, res: Response) => {\n  Promise.all([\n    si.mem()\n  ]).then(data => {\n    res.status(200).json({\n      mem: data[0]\n    });\n  }).catch(error => console.error(error));\n});\n\nrouter.get('/api/sysinfo/disk', (req: Request, res: Response) => {\n  Promise.all([\n    si.fsSize(),\n    si.diskLayout(),\n    si.blockDevices()\n  ]).then(data => {\n    res.status(200).json({\n      fsSize: data[0],\n      diskLayout: data[1],\n      blockDevices: data[2]\n    });\n  }).catch(error => console.error(error));\n});\n\nrouter.get('/api/sysinfo/processes', (req: Request, res: Response) => {\n  Promise.all([\n    si.processes(),\n    si.services('*')\n  ]).then(data => {\n    res.status(200).json({\n      processes: data[0],\n      services: data[1]\n    });\n  }).catch(error => console.error(error));\n});\n\n\n\nrouter.get('/api/sysinfo/wifi', (req: Request, res: Response) => {\n  Promise.all([\n    si.wifiNetworks\n  ]).then(data => {\n    res.status(200).json({\n      wifi: data[0]\n    });\n  }).catch(error => console.error(error));\n});\n\n\nrouter.get('/api/sysinfo/all', (req: Request, res: Response) => {\n  Promise.all([\n    si.getStaticData(),\n    si.getDynamicData('', '')\n  ]).then(data => {\n    res.status(200).json({\n      static: data[0],\n      dynamic: data[1]\n    });\n  }).catch(error => console.error(error));\n});\n\nexport = router;\n","module.exports = require(\"body-parser\");","module.exports = require(\"compression\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"cors\");","module.exports = require(\"easy-rbac\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"knex\");","module.exports = require(\"minimist\");","module.exports = require(\"path\");","module.exports = require(\"request\");","module.exports = require(\"shortid\");","module.exports = require(\"socket.io\");","module.exports = require(\"systeminformation\");","module.exports = require(\"url-join\");"],"sourceRoot":""}